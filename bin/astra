#!/usr/bin/env python
# encoding: utf-8

import click
from astra import log
from logging import DEBUG, INFO

from astra.tools.sdss_astra import (data, subset, component, execute, 
                                    query_execute, schedule, setup)

# Common options.
@click.group()
@click.option("-v", "verbose", default=False, is_flag=True,
              help="verbose mode")
@click.pass_context
def cli(context, verbose):
    context.ensure_object(dict)
    context.obj["verbose"] = verbose

    # TODO: This isn't correctly followed for sqlalchemy output. 
    # It defaults to verbose!
    log.set_level(DEBUG if verbose else INFO)


# Add various commands
cli.add_command(setup.setup)
cli.add_command(data.data)
cli.add_command(subset.subset)
cli.add_command(component.component)
cli.add_command(execute.execute)
cli.add_command(query_execute.query_execute)
cli.add_command(schedule.schedule)


if __name__ == "__main__":
    cli(obj=dict())